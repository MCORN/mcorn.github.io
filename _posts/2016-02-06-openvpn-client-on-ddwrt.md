---
title: OpenVPN on DD-WRT and Policy Based Routing
updated: 2016-02-06 19:06
---

I took out a VPN subscription with [PIA](https://www.privateinternetaccess.com) and wanted to set it up on my DD-WRT router, but only for selected IPs.
It is all in the guide, my version of DD-WRT doesn't have the "User Pass Authentication" fields mentioned in the [official PIA docs](https://www.privateinternetaccess.com/pages/client-support/dd-wrt-openvpn) and I found a guide for that scenario [here](http://www.instructables.com/id/Configure-VPN-Settings-on-Older-DD-WRT-Routers-for/?ALLSTEPS). Followed to the letters, this successfully routed all connections through the VPN. 
Now this isn't a set up that would work because as both me and my wife work from home, we connect through our respective work environments through VPN clients on our laptops and this causes issues if our default connection itself is routed through a VPN. 
Here comes the "Policy Based Routing" field on the Services->VPN->OpenVPN Client section. As per [this thread](https://www.privateinternetaccess.com/forum/discussion/17495/dd-wrt-with-openvpn-and-policy-based-routing-setup), you need to enter the individual IP addresses you want to specifically route through the VPN in the format "192.168.1.103/32" on separate lines (BTW, entering an IP followed by"/0" completely bricks the modem, which you then need to reset so do make sure you take the initial steps of backing up the existing configuration) and hey presto, everything goes through the default connection while the selected IPs go through the VPN connection.
***After a couple of days, everything seems still to work perfectly. No issue with connecting on work VPN, speed is good and modem doesn't seem overloaded. If it did, I could always try overclocking as per instructions [here](http://www.stevejenkins.com/blog/2013/03/how-to-overclock-a-ciscolinksys-e4200-router-running-dd-wrt/)***